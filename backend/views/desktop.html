<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AeroSpace - Desktop</title>
    
    <link rel="stylesheet" href="/styles/global.css">
    <link rel="stylesheet" href="/styles/desktop.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body id ="desktop-area">

    <div id="div">
        
        <div class="desktop-icons">
            <div class="desktop-icon" onclick="toggleWindow('profileWindow')">
                <img src="/assets/imgs/profile.png" alt="Perfil" id="desktopAvatar">
                <span>Meu Perfil</span>
            </div>
            <div class="desktop-icon" onclick="toggleWindow('comunidadeWindow')">
                <img src="/assets/imgs/comunidade.png" alt="Comunidade">
                <span>AeroChat</span>
            </div>
            <div class="desktop-icon" onclick="toggleWindow('taskWindow')">
                <img src="https://img.icons8.com/fluency/96/todo-list.png" alt="Tasks">
                <span>Tasks</span>
            </div>
            <div class="desktop-icon" onclick="toggleWindow('curatoriaWindow')">
                <img src="https://img.icons8.com/fluency/96/folder-invoices.png" alt="Curadoria">
                <span>Curadoria</span>
            </div>
        </div>

        <div class="mood-widget" onclick="toggleWindow('moodSelector')">
            <div class="mood-icon" id="moodIcon">:)</div>
            <div class="mood-text" id="moodText">Vibe tranquila</div>
        </div>

        <div class="aero-window mood-selector" id="moodSelector" style="display: none; width: 400px; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <div class="window-header">
                <div class="title">Como você está se sentindo?</div>
                <div class="controls">
                    <button class="btn-win close" onclick="toggleWindow('moodSelector')">X</button>
                </div>
            </div>
            <div class="window-body">
                <div class="mood-options">
                    <div class="mood-option" onclick="setMood('chill', ':)', 'Vibe tranquila')">
                        <span class="emoji">:)</span>
                        <span class="label">Tranquilo</span>
                    </div>
                    <div class="mood-option" onclick="setMood('sad', ':(', 'Chovendo por dentro')">
                        <span class="emoji">:(</span>
                        <span class="label">Melancólico</span>
                    </div>
                    <div class="mood-option" onclick="setMood('hyper', ':D', 'Energia total!')">
                        <span class="emoji">:D</span>
                        <span class="label">Hypado</span>
                    </div>
                    <div class="mood-option" onclick="setMood('retro', ':O', 'Nostalgia pura')">
                        <span class="emoji">:O</span>
                        <span class="label">Nostálgico</span>
                    </div>
                    <div class="mood-option" onclick="setMood('cyber', ':|', 'Meh')">
                        <span class="emoji">:|</span>
                        <span class="label">Meh</span>
                    </div>
                    <div class="mood-option" onclick="setMood('zen', ':P', 'Paz interior')">
                        <span class="emoji">:P</span>
                        <span class="label">Zen</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="aero-window" id="taskWindow" style="display: none; top: 15%; left: 60%;">
            <div class="window-header" id="taskHeader">
                <div class="title">
                    <img src="https://img.icons8.com/fluency/24/todo-list.png">
                    Minhas Missões
                </div>
                <div class="controls">
                    <button class="btn-win min" onclick="toggleWindow('taskWindow')">_</button>
                    <button class="btn-win close" onclick="toggleWindow('taskWindow')">X</button>
                </div>
            </div>
            <div class="window-body">
                <div class="task-input-area">
                    <input type="text" id="newTaskInput" placeholder="Nova missão..." onkeypress="handleEnter(event)">
                    <button class="btn-glossy-small" onclick="addTask()">Add</button>
                </div>
                <ul id="taskList" class="scroll-aero">
                    <li class="loading-text">Carregando missões...</li>
                </ul>
            </div>
        </div>

        <div class="aero-window" id="profileWindow" style="display: none; top: 10%; left: 10%;">
            <div class="window-header" id="profileHeader">
                <div class="title">Propriedades de Usuário</div>
                <div class="controls">
                    <button class="btn-win close" onclick="toggleWindow('profileWindow')">X</button>
                </div>
            </div>
            <div class="window-body" style="text-align: center;">
                <img src="C:\Users\henry\Documents\GitHub\AeroSpace\frontend\assets\imgs\profile.png" id="profileAvatar" style="margin-bottom: 10px; cursor: pointer; width: 96px; height: 96px; border-radius: 8px;" onclick="changeAvatar()">
                <h3 id="usernameDisplay">Visitante</h3>
                <button class="btn-glossy" onclick="document.getElementById('wallpaperInput').click()">Mudar Wallpaper</button>
                <input type="file" id="wallpaperInput" accept="image/*" style="display: none;" onchange="changeWallpaper(event)">
                <br><br>
                <button class="btn-glossy" onclick="logout()">Fazer Logoff</button>
            </div>
        </div>

        <div class="aero-window" id="curatoriaWindow" style="display: none; width: 500px; height: 450px; top: 10%; left: 30%;">
            <div class="window-header">
                <div class="title">Minha Curadoria</div>
                <div class="controls">
                    <button class="btn-win close" onclick="toggleWindow('curatoriaWindow')">X</button>
                </div>
            </div>
            <div class="window-body">
                <div class="nav-tabs">
                    <div class="nav-tab active" onclick="switchCuratedTab('links')">Links</div>
                    <div class="nav-tab" onclick="switchCuratedTab('fotos')">Fotos</div>
                    <div class="nav-tab" onclick="switchCuratedTab('filmes')">Filmes</div>
                </div>
                
                <div class="task-input-area" style="margin-bottom: 15px;">
                    <input type="text" id="curatedTitle" placeholder="Título">
                    <input type="text" id="curatedUrl" placeholder="URL">
                    <button class="btn-glossy-small" onclick="addCuratedItem()">+</button>
                </div>

                <div id="curatedContent" class="curated-grid"></div>
            </div>
        </div>

        <div class="aero-window" id="comunidadeWindow" style="display: none; width: 400px; height: 500px; top: 10%; left: 50%;">
            <div class="window-header">
                <div class="title">AeroChat</div>
                <div class="controls">
                    <button class="btn-win close" onclick="toggleWindow('comunidadeWindow')">X</button>
                </div>
            </div>
            <div class="window-body">
                <div class="chat-messages" id="chatMessages">
                    <div style="text-align: center; color: #999; font-size: 12px;">Carregando mensagens...</div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chatInput" placeholder="Digite sua mensagem..." onkeypress="handleChatEnter(event)">
                    <button onclick="sendMessage()">Enviar</button>
                </div>
            </div>
        </div>

    </div>

    <div class="taskbar">
        <div class="start-button">
            <img src="https://img.icons8.com/fluency/48/windows-client.png" alt="Start">
            <span>Iniciar</span>
        </div>
        <div class="task-items" id="openWindowsList"></div>
        <div class="tray-area">
            <span id="clock">12:00</span>
        </div>
    </div>

    <script type="module" src="/scripts/desktop.js"></script>
</body>
</html>